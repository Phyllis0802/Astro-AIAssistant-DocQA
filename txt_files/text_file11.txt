高灵敏度太赫兹在一级数据处理过程中除了释放的数据文件以外，还包含了一系列处
理过程中产生的中间文件及临时文件。对于数据处理的释放文件，存储的文件路径如
下：
CSST_L1/HSTDM/OBSID/SCI/子目录（CAL、QCP、或PDP）/文件名
表8:1 级数据释放文件格式和内容定义
文件名字符串
文件格式
文件类型
BITPIX
（每一像
元数的位
数）
文件内容
CSST_HSTDM_
CAL_context_*_
*.fits
FITS
数据（存
档）
32
1 级数据文件生成过程中涉及的所
有数据文件索引表，所产生数据的
时间段内太赫兹模块具体的工作模
式时序列表（工作模式包括正常观
测、OFF 点校准，冷热负载校
准），处理流程历史信息
CSST_HSTDM_
PDP_*_L1_*_*_
*_obsid.fits
FITS
TABLE 数
据（存
档）
32
对科学观测任务obsid 的0 级数据
进行一级数据处理DRP1 处理后得
到频谱数据(没有经过baseline
removal 以及standing wave
removal)
CSST_HSTDM_
QCP_*_*_*.fits
FITS
QC1 数据
（存档）
32
对应obsid 频谱数据处理过程中的
质量检测QC1 数据
CSST_HSTDM_
CAL_bsl_*_*.fits
FITS
TABLE 数
据（存
档）
32
一级数据处理DRP1 处理后得到频
谱数据经过baseline removal 操作
后的频谱数据
CSST_HSTDM_
CAL_standingwa
ve_*_*.fits
FITS
TABLE 数
据（存
档）
32
一级数据处理DRP1 处理后得到频
谱数据经过standingwave removal
操作后的频谱数据
13
5.2.7
定标参考数据
定标参考文件的类型较多，不同的后端模块和不同的pipeline 处理步骤会使用不
同的定标参考文件。每个参考文件的primary header 包含有记录该参考文件相关信息
的关键字，包括参考文件的类型，制作时间、方法、人员，使用条件关键字（如
USEAFTER）等详情将在《CSST 定标参考数据定义》文档中进一步明确定义，目前
版本为内部草稿版本，可参阅相关文档KSC-SJB-JS-0016-01.02。
5.3
接口示意图
5.3.1
主巡天模块（MSC）
多色成像1 级数据中的图像文件对象（_IMG.）接口与0 级数据一致（参见KSC-00-
JK-0001-02.01 文件中的图6）。每幅图像文件对应的权重文件对象（_WHT.）和特征
位文件对象（_FLG.）与图像文件对象的结构和接口一致。
文件对象包含两个HDU，其中primary HDU 只包含望远镜的观测信息，且继承自0 级
数据，不进行改动。同一次观测所有波段测光和无缝光谱图像global header 内容基本
一致。对象有一个图像扩展，图像扩展的header 包含CCD 相关信息、WCS 相关数据
等内容，大部分内容继承自0 级数据header 中的信息。image data 部分为二维的
datacube 矩阵，来源于0 级数据。以探测器选型使用CCD 为例，0 级数据的16 通道数
据矩阵（参见KSC-00-JK-0001-02.01 文件中的图7），并经过oversan 改正，bias 改正，
平场改正等操作，矩阵数值发生改变（暂定流量单位变为e-/s），并按照空间排布说
明（参见：主焦面图像格式-每读出通道1 个数据包.docx），完成拼接，如图1 所示。
权重对象中的数据矩阵大小与图像对象一致，每个像元的初始权重值为：flux_wht =
1/(gain*flux_img+readout_noise^2)。特征位对象中的数据矩阵大小与图像对象一致，
每个像元用整数进行类型标定，包括：合格像元，坏像元，宇宙线，卫星拖尾，饱和
亮星等，具体数值与对应的特征见表21。科学图像和其对应的权重和特征位图像的例
子见图2。权重对象和特征位对象的矩阵数据会随着流水线处理过程的进行，逐步加
入每个功能实现过程中产生的误差或者新的类型标定。
14
图1：CSST 主巡天相机1 级数据image data 结构示意图。其中数字表示不同的读出通道，通道间
的分隔用黑色边框表示。橙色为data 区域。0 级数据中的overs(pre)scan 区域数据在流水线处理过
程中已经从data 区域扣除，不再出现在1 级数据的image data 中。
图2: 科学图像（左图）及其对应的特征位（中图）和权重（右图）图像。（来源于
BASS 巡天1 级数据）。
15
图3：无缝光谱数据格式
表9：像元特征与对应的整数。正常像元为0，坏像元为1，每种外部原因造成的特征按照2 为底
的指数形式增加。如果该像元兼具多个特征，则将所有特征整数相加后进行赋值。
特征
特征整数
描述
合格像元
0
可以用于有效科学研究的像元
坏像元
1
因为探测器本身造成的不可用于有效科学研究的像
元
热像元
2
因为宇宙线或其它外部原因造成的不可用于有效科
学研究的像元
流量饱和溢出像元
4
饱和像元及流量溢出污染的像元
宇宙线像元
8
宇宙线污染的像元
卫星拖尾像元
16
卫星或者人造移动天体轨迹污染的像元
鬼像像元
32
鬼像污染的像元
散射光像元
64
散射光污染的像元（包括dragon breath）
5.3.2
无缝光谱（SLS）
无缝光谱1 级科学数据产品文件格式为MEF 格式，包含3 个扩展（HDU），文件格
式如图3 所示。
其中，primary HDU header 包含望远镜的观测信息，且继承自0 级数据，除数据维度
大小外不再进行任何改动。第一个HDU 扩展为SCI 图像，SCI 图像扩展的header 包
含CCD 相关信息、WCS 相关数据等内容，大部分关键字继承自0 级数据header 中的
信息。SCI 扩展data 为二维矩阵数据，源于0 级数据。以探测器选型使用CCD 为例，
0 级数据的16 通道数据矩阵（参见KSC-SJ1-JS-0005-01.04.docx 文件中的图2），经
过oversan 改正，bias 改正，平场改正等操作，矩阵数值发生改变（暂定流量单位变
16
为e-/s），并按照空间排布说明（参见：主焦面图像格式-每读出通道1 个数据
包.docx），完成拼接。
第二个扩展为ERR 数据，数据矩阵大小与图像对象一致，每个像元的初始error
值为：
ؿ퐶퐶Ʈ =
푆퐶Ƴ −푏푖ǅǗ + 푟푒ǅ푑ǒǓ푖Ǘ푒2
--------常规观测曝光
ؿ퐶퐶Ʈ = 푟푒ǅ푑ǒǓ푖Ǘ푒
--------- Bias 曝光
第三个扩展为DQ 数据，数据矩阵大小与图像对象一致，每个像元用整数进行类
型标定，包括：合格像元，坏像元，宇宙线，卫星拖尾，饱和亮星等，具体数值如表
10 所示。
表10：DQ 数组中的标志值说明。正常像元为0，坏像元为1，每种外部原因造成的特征按照2 为
底的指数形式增加。如果该像元兼具多个特征，则将所有特征整数相加后进行赋值。
特征
特征整数
描述
合格像元
0
可以用于有效科学研究的像元
坏像元
1
因为探测器本身造成的不可用于有效科学研究的像元
热像元
2
因为宇宙线或其它外部原因造成的不可用于有效科学研究
的像元
流量饱和溢出像元
4
饱和像元及流量溢出污染的像元
宇宙线像元
8
宇宙线污染的像元
卫星拖尾像元
16
卫星或者人造移动天体轨迹污染的像元
鬼像像元
32
鬼像污染的像元
散射光像元
64
散射光污染的像元（包括dragon breath）
5.3.3
多通道成像仪（MCI）
多通道成像仪MCI 的1 级数据中的图像文件对象（_IMG.）接口与0 级数据一致。每
幅图像文件对应的权重文件对象（_WHT.）和特征位文件对象（_FLG.）与图像文件
对象的结构和接口一致。
文件对象包含两个HDU，其中primary HDU 只包含望远镜的观测信息，且继承自0 级
数据，不进行任何改动。同一次观测所有观测图像global header 内容基本一致。对象
有一个图像扩展，图像扩展的header 包含CCD 相关信息、WCS 相关数据等内容，大
部分内容继承自0 级数据header 中的信息。image data 部分为二维的datacube 矩阵，
来源于0 级数据。以探测器选型使用CCD 为例，0 级数据的16 通道数据矩阵，经过
oversan 改正，bias 改正，平场改正等操作，矩阵数值发生改变（暂定流量单位变为e-
/s），并按照空间排布说明（参见：主焦面图像格式-每读出通道1 个数据包.docx），
完成拼接，如图4 所示。权重对象中的数据矩阵大小与图像对象一致，每个像元的初
始权重值为：flux_wht = 1/(gain*flux_img+readout_noise^2)。特征位对象中的数据矩阵
大小与图像对象一致，每个像元用整数进行类型标定，包括：合格像元，坏像元，宇
宙线，卫星拖尾，饱和亮星等，具体数值与对应的特征见表11。权重对象和特征位对
17
象的矩阵数据会随着流水线处理过程的进行，逐步加入每个功能实现过程中产生的误
差或者新的类型标定。
表11：像元特征与对应的整数。正常像元为0，坏像元为1，每种外部原因造成的特征按照2 为底
的指数形式增加。如果该像元兼具多个特征，则将所有特征整数相加后进行赋值。
特征
特征整数
描述
合格像元
0
可以用于有效科学研究的像元
坏像元
1
因为探测器本身造成的不可用于有效科学研究的像元
热像元
2
因为宇宙线或其它外部原因造成的不可用于有效科学研究
的像元
流量饱和溢出像元
4
饱和像元及流量溢出污染的像元
宇宙线像元
8
宇宙线污染的像元
卫星拖尾像元
16
卫星或者人造移动天体轨迹污染的像元
鬼像像元
32
鬼像污染的像元
散射光像元
64
散射光污染的像元（包括dragon breath）
图4：MCI1 级数据image data 结构示意图。其中数字表示不同的读出通道，通道间的分隔
用黑色边框表示。橙色为data 区域。0 级数据中的overs(pre)scan 区域数据在流水线处理
过程中已经从data 区域扣除，不再出现在1 级数据的image data 中。
18
5.3.4
积分场光谱仪（IFS）
积分视场光谱仪1 级数据产品文件包括RSS 和CUBE 两组文件对象，为FITS 格
式，符合标准fits 定义规范。
RSS 文件对象包含4 层HDU（如图5 所示），其中primary HDU 数据为空，只
包含望远镜的观测信息，且继承自0 级数据，除数据维度大小关键字外不进行任何改
动。
第一层HDU 扩展为三维光谱datacube 矩阵，其数值为经过一级RSS 数据处理流
水线后获得的在给定空间和波长spaxel 上的流量值（单位为1E-17
erg/s/cm2/Å/arcsec2）。其中，空间维度大小为32*32，波长维度采样数取决于波长采
样方式（LIN 或者LOG）。该HDU 扩展header 包含IFS 设备相关信息、WCS 相关数
据等内容，大部分关键字继承自0 级数据header 中的信息，并增添了数据处理过程的
相关的header 关键字。
第二层HDU 扩展为噪声误差，记录为inverse variance，即
1
ؿ2，其中σ为HDU1 中
流量值的误差，单位和流量相同。
第三层HDU 扩展为MASK 图像，数据矩阵大小与HDU1 一致，为处理过程中的
必要标记。每个数据元用32 位二进制数进行特征标定，如果数据元存在某种特征，
如合格像元、坏像元、宇宙线、流量定标不可靠等，相应二进制位标记为一个二进制
数。MASK 图像的二进制位值与对应的特征见表12；
HDU2，HDU3 的头文件仅包括标准头文件关键字。
表12：IFS RSS 数据对象HDU3 中MASK 标记位及对应特征。
特征
特征整数
描述
合格像元
0
可以用于有效科学研究的像元
流量定标不可信
1
因信噪比过低等原因流量定标不可靠
图5：IFS_RSS 数据格式
19
宇宙线污染
2
因为宇宙线或其它外部原因造成的不可用于有效科
学研究的像元
坏像元（亮点、暗点、
坏点）
4
因为探测器本身造成的不可用于有效科学研究的像
元
CUBE 数据中SCI 类型对象包含8 层HDU（如图6 所示），其中primary HDU
存储叠加后CUBE 的图像信息，头文件关键字，包含程序和文件版本信息、objid、观
测起始时间、叠加次数、累计曝光时间、CUBE 的WCS 信息、部分从RSS 继承的共
通的望远镜和仪器相关头等关键字。
HDU1 存储叠加后流量数据立方（单位为1E-17 erg/s/cm2/ Å /arcsec2 ）。数据立
方的空间维度大小取决于曝光方案，数据元空间大小为0.1”*0.1”，波长维度采样数
取决于波长采样方式（LIN 或者LOG）。
HDU2 为噪声误差（记录为inverse variance），
1
ؿ2，其中σ为流量误差）。HDU3
为MASK 标记位（CUBE_MASK），每个数据元用32 位二进制数进行特征标定，具
体数值与对应的特征见表27。