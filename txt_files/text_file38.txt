对于一天内星冕仪观测产生的对应0 级数据，生成1 级产品的
处理时间≤24 小时。
6.2.2.7
太赫兹模块数据处理技术要求
在200s 积分时间情况下，数据处理系统应测量到的信号灵敏度
≤150mK（3σ、100kHz 带宽）。
对于一天内太赫兹模块观测产生的对应0 级数据，生成1 级产
27
品的处理时间≤24 小时。
生成任务用户可使用的太赫兹2 级产品的处理时间≤24 小时
（完成5 平方度的OTF 数据成图处理）。
6.2.2.8
一般观测申请数据处理指标要求
生产0 级和1 级数据产品；
数据处理技术指标适用一般观测所使用的载荷数据处理指标要
求。
6.2.2.9
机遇目标观测数据处理指标要求
生产0 级和1 级数据产品；
数据处理技术指标适用机遇观测所使用的载荷数据处理指标要
求。
6.2.3 数据库技术指标
1. 数据库主要星表为2 级数据巡天总测光星表，包括7 个波段
17500 平方度的巡天单次测光数据，预计超过1 万亿行，列数
100 列左右。数据库应能不少于1 万亿行、列数不少于100 的星
表的分布式存储。
2. 数据库中2 级数据无缝光谱总星表，包括3 个波段17500 平方
度的单次曝光巡天光谱参数数据，预计达到1000 亿行，列数
100 列左右。数据库应能不少于1000 亿行、列数不少于100 的
星表的分布式存储。
28
3. 支持科学数据处理系统软件在公有云环境中100 个并发使用条
件下进行1 度锥形检索、写入1 级数据和更新0-1 级数据相关
表的操作延迟不超过1 秒。
4. 支持科学数据处理系统软件在公有云环境中100 个并发使用条
件下对一个正常大小2 级数据表（包含一小块非密集星场天区，
尺寸约为一个探测器面积，即11´×11´，天体数目小于10 万）
的写入操作延迟小于20 秒。
5. 支持科学数据处理系统软件并发调用规模不小于100 个线程。
7系统组成
7.1 三个配置项简述
科学数据处理系统由3 个软件组成，即是3 个配置项（见图
7.1），分别为：
（1）科学观测需求编排（简称：编排软件）：负责根据预先制
定的观测策略，在人机交互环境下针对不同类型的观测进行固定周
期的观测需求编排，形成观测需求编排文件；
（2）观测数据仿真软件（简称：仿真软件）：通过对望远镜的
光学结构、对各个后端模块硬件设备（后光路、滤光片、光栅、探
测器的位置和物理性质等）进行模拟，根据输入原始信息（空间位
置、几何形状、SED、距离、自行等）采用光线追迹等方法产生仪
器仿真图像。这些仿真图像将真实模拟仪器的各种效应；
29
（3）数据处理软件：指完成对巡天光学设施所有后端模块（即
巡天模块、多通道成像仪、积分视场光谱仪、系外行星成像星冕仪、
太赫兹模块）所观测到的0 级数据的科学处理，生成1 级和2 级数
据，形成科学数据产品。
这三个软件分别按照不同类型的流程或流水线，组合各个不同
类型工作包，从而实现整个巡天空间望远镜各个后端模块不同类型
观测数据的统一、批量、自动化处理，并根据要求生成可以发布的
数据产品。
图7.1 科学数据处理系统的组成
7.2 编排软件和仿真软件的执行流程命名规则
执行流程命名规则如下：
科学数据处理系统-模块标识符-流程简称-序号（XXX-XX-XX-
巡天平台
巡天空间望远镜
载人航天工
程公有云环
境
主光机
巡天光学设施
巡天模块
多通道成像仪
积分视场光谱仪
系外行星成像星冕仪
太赫兹模块
科学数据处理系统
数据处理软件
主巡天多色成像处理
主巡天无缝光谱处理
多通道成像仪数据处理
积分视场光谱仪数据处理
星冕仪数据处理
太赫兹数据处理
天体测量处理
科学观测需求编排软件
观测数据仿真软件
主巡天多色图像仿真
主巡天无缝光谱仿真
多通道成像仪图像仿真
积分视场光谱仪图像仿真
星冕仪图像仿真
业务中间件模块
仿真
数据
0级 
观测
数据
科学
数据
产品
设施各项参数
科学用户
科学数据访问
科学观
测需求
30
XX）,用短横线连接，详细解释见表7.1。
表7.1 流程命名规则列表
命名
标识符
字符串长度
详细解释
科学数据处理系统
KSC
XXX
科学数据处理系统
模块标识符
BP
XX
观测数据仿真软件
FZ
科学需求编排软件
流程简称
LC
XX
流程，简称LC
流程序号
01
XX
第几个处理流程，如01、02、3……
例如：KSC-BP-LC-01，表示数据系统编排软件的第1 个处理流
程。
7.3 数据处理软件流水线命名规则
通常流水线分成三种类型：日常处理流水线、数据再处理流水
线和数据产品生产流水线。前两类流水线在多数情况下将0 级数据
处理成1 级数据；而最后一类流水线则将1 级数据再加工成2 级数
据，并准备好可以发布给科学用户的数据产品。科学数据系统流水
线划分为0 级处理流水线，1 级处理流水线和2 级处理流水线。0
级和1 级处理流水线即是日常处理流水线；2 级处理流水线则是数
据产品生成流水线。
流水线命名规则如下：
科学数据处理系统-模块标识符-流水线简称和类别-序号（XXX-
XXX-XXX-XX）,用短横线连接。详细解释见表7.2。
表7.2 流水线命名规则列表
命名
标识符
字符串长度
详细解释
科学数据处理系统
KSC
XXX
科学数据处理系统
31
模块标识符
SJ1
XXX
主巡天多色成像数据处理
SJ2
主巡天无缝光谱数据处理
SJ3
数据流管理
SJ4
流水线运行管理
SJ5
多通道成像仪数据处理
SJ6
积分视场光谱仪数据处理
SJ7
星冕仪数据处理
SJ8
太赫兹数据处理
SJ9
天体测量处理
SJA
数据科学可用性标记
SJB
在轨定标数据处理
流水线简称
PL
XX
PipLine，简称PL
类别
0
X
0 级处理流水线
1
1 级处理流水线
2
2 级处理流水线
流水线序号
01
XX
第几条流水线，如01、02、3……
例如：KSC-SJ1-PL0-01，表示数据系统多色成像模块的0 级
处理流水线第1 条流水线。
7.4 工作包命名规则
工作包命名规则如下：
科学数据处理系统-模块标识符-工作包简称-序号（XXX-XXX-
XX-XX）。详细解释见表7.3。
表7.3 工作包命名规则列表
命名
标识符
字符串长度
解释说明
科学数据处理系统
KSC
XXX
科学数据处理系统
模块标识符
SJ1
XXX
见流水线命名规则表7.1、表7.2 中模
块标识符
工作包简称
PK
XX
PacKage，简称PK
工作包序号
01
XX
01、02、03……
例如：KSC-SJ1-PK-01，表示科学数据处理系统多色成像模块
32
的第1 个工作包。
8数据处理软件流水线设计
数据处理软件是CSST 科学数据处理系统的核心任务，包括5
个硬件后端模块的数据处理，巡天模块（包括多色成像数据和无缝
光谱数据）
、多通道成像仪模块、积分视场光谱仪模块、星冕仪模块
和太赫兹模块，详细信息见表10.1，每个模块的数据处理都分为0
级数据处理，1 级数据处理和2 级数据处理，其中星冕仪模块只到
1 级数据处理。最终获取科学数据产品并进入数据库。0、1 级数据
处理总框架图见图10.1；2 级数据处理总框架图见图10.2。
表10.1 数据处理软件0-1 级数据处理模块功能列表
序号
功能名称
功能详解
1
巡天模块
巡天模块观测得到多色成像数据，无缝光谱数
据，然后经过多色成像数据处理和无缝光谱数
据处理，最终生成测光数据库，无缝光谱数据
库和天测数据库。
2
多通道成像仪模块
主要生成多通道成像仪后端模块数据
3
积分视场光谱仪模块
主要生成积分视场光谱仪模块数据
4
星冕仪模块
主要生成星冕仪模块数据
5
太赫兹模块
主要生成太赫兹模块数据
33
0级数据
数据类型判断
巡天模块
数据处理
巡天模块数据
多通道成像仪
数据处理
多通道成像仪
数据
积分视场光谱
仪数据处理
积分视场光谱
仪数据
星冕仪
数据处理
星冕仪数据
太赫兹
数据处理
太赫兹数据
转人工处理
在轨定标数据
转人工处理
测试数据
1级数据
数据库
数据库
                                    0级数据处理
Q
C1
Q
C0
                                     1级数据处理
图10.1 数据处理软件0、1 级数据处理总框架图
34
1级数据
巡天模块
数据产品生成
流水线
多通道成像仪
数据产品生成
流水线
积分视场光谱仪数
据产品生产
流水线
太赫兹
数据产品生成
流水线
2级数据产品
数据库
数据库
2级数据处理
Q
C2
数据准备
监控数据产品
流水线状态
巡天模块
1级数据
多通道成像仪
1级数据
积分视场光谱仪
1级数据
太赫兹
1级数据
数据库生成
图10.2 数据处理软件2 级数据处理总框架图
8.1 巡天模块数据处理
8.1.1 巡天模块数据分类
巡天模块包括两种配置的探测器，一个用于多色成像，一个用
于无缝光谱。因此获取两种不同类型的观测数据，即多色成像数据
和无缝光谱数据。在得到0 级观测数据输入后按这两类数据分别进
行处理，分为多色成像数据处理和无缝光谱数据处理，其中多色成
像处理按照功能不同分为多色成像数据处理和天体测量数据处理，
最终获取科学数据产品，存入数据库供科学家使用。下面对两类数
据和处理进行介绍。
35
8.1.1.1
多色成像数据
多色成像数据处理系统流水线的主要任务是将主巡天模块多色
成像18 块探测器的0 级科学数据（raw data）进行处理生成1 级和
2 级科学数据产品。
多色成像数据处理过程简单介绍如下：
0 级多色成像科学数据需要利用参考数据，经过仪器效应改正
转换为未定标的图像数据及数据对应的权重数据（weight data）、标
记位数据（flag data）等。此过程主要目的是改正光学系统、探测器
芯片、电子控制等硬件设备对数据造成的污染，其中包括的功能较
多，且部分功能与探测器选型有关。基本流程包括：偏置改正、暗
场改正、平场改正、快门效应改正、宇宙线和坏像元探测等。
完成仪器效应改正之后进入位置定标功能。此过程是利用18
块多色成像探测器共同参与，计算得到整个靶面的物理位置与天球
坐标的投影映射。开始定标计算前，需要通过数据库获得望远镜指
向及其视场大小区域内的外部参考星表，并从未定标的图像数据中
探测得到用于计算的天体，最后通过算法获得映射关系的公式。
完成位置定标后的图像数据，可以进入外部流量定标功能。此
过程是对不同探测器的图像分别进行对应滤光片波段的零点计算。
也需要通过数据库获得望远镜指向及其视场大小区域内的外部参考
星表，与图像数据中探测得到的天体进行匹配，并利用算法筛选稳
定的天体并进行颜色项等修正后得到探测器的零点。结束位置定标
后的图像数据，需要经过数据科学可用性标记模块检查合格后，完
36
成数据文件与文件头文件的合并，此即1 级图像数据。
合格的1 级多色成像图像数据继续使用以提取星表。此过程是
对不同探测器的图像分别进行科学目标探测，最终形成包括科学图
像中所有天体信息的星表等2 级数据产品。星表中需要包括每个目
标的位置、通过不同测量方法获得的流量、点扩散函数信息、不同
模型下的星系形态和流量等。
天体测量多色成像数据处理对从探测器获得的0 级多色成像数
字图像进行修正和定标，然后在图像中探测天体目标，计算流量和
形状等参数测量并进行天体测量，检测图像上的太阳系快速移动天
体，生成1 级天测科学数据。在1 级天测数据的基础上开展单帧图
像高精度相对定位，对已积累多次观测数据的天区，开展多历元位
置解算BCRS 下天体测量5 参数的工作，对多次观测到的太阳系快
速移动目标，开展轨道确定以及目标分类工作。最终形成可供天文