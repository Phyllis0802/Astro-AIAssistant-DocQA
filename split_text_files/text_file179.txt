数据库和流水线运行管理是连接数据处理软件和公有云平台的
中间件，其在数据处理软件中的结构如图10.221 所示。
图10.221 数据库和流水线运行管理在数据处理软件中的位置
8.8.1 数据库相关工作包
数据库模块支持数据处理软件的运行，协助数据处理的各个类
型流水线完成对各级数据的访问，并提供天文数据所必须的特殊查
询和匹配功能。
数据库包括两个工作包：数据流管理API 工作包和天文查询、
匹配算法工作包。
首先数据库模块部分应包括一个满足功能需求的内部使用分布
式数据库，它应区别于提供给科学用户访问未来数据产品的数据库，
仅供数据处理系统内部运行的时候使用。这一数据库应为定制数据
库，以便按照性能优先原则支持上述两个工作包的工作。
8.8.1.1
数据流管理API 工作包
该工作包实现一整套数据表查询API 接口，1、2 级数据信息写
入/更新API 接口，以及外部参考星表的天文查询API 接口。
数据流管理API 支持网络远程调用。它将为数据处理软件的流
水线工作包所调用，支持各条1、2 级流水线对数据库内容的访问。
242
这一工作包原则上也可以被任何需要访问数据系统内部数据库的软
件访问，因此是一个开放的调用接口。
8.8.1.2
天文查询、匹配算法工作包
该工作包主要提供以下支持：高效率对一个比较大的天区（不
少于1 度）实现锥形检索，支持采用不同阶数的Healpix 索引检索
天区数据，支持交叉证认以匹配不同星表中的同源天体等。
该工作包是数据流管理API 的后台支持，数据处理软件需要天
文查询、目标匹配等处理的时候，通过数据流管理API 调用该工作
包提供的功能实现操作。
8.8.2 流水线运行管理相关工作包
流水线运行管理支持数据处理中各个不同类型流水线平滑运行
在公有云平台上。它为各个类型流水线提供容器化封装，分配到获
取的公有云计算资源上执行运行操作。
流水线运行管理相关工作包包括：流水线逻辑主控程序工作包
和流水线并行调度管理工作包。
8.8.2.1
流水线逻辑主控程序工作包
流水线逻辑主控程序工作包根据数据的具体类型确定应执行哪
些必要流水线操作，并将需要执行的流水线名称告知流水线并行调
度管理工作包。
8.8.2.2
流水线并行调度管理工作包
该工作包负责为数据处理软件连接公有云平台，根据流水线逻
辑主控程序工作包的要求发出资源申请并动态在其上部署容器化封
装好的流水线程序并监控其执行状态，处理因网络不稳定等原因产
生的任何可靠性问题。
9需求可追踪性
9.1 科学数据处理产品可追踪性分析
1. 科学观测1 级、2 级数据产品，其主要数据内容、数据格式
详见表6.2，由CSST 科学数据处理系统负责生产；
2. 数据处理辅助数据产品，包括外部标准星星表和各后端模块
243
定标数据产品。定标数据由CSST 科学数据处理系统根据巡
天光学设施各研制单位提供的地面测试定标数据和CSST 在
轨定标数据生成，数据格式为文本或FITS 文件；
3. 科学观测3 级数据产品，由科学数据处理系统集成经协调
确定的研究课题提交的用于生成3 级数据产品的分析软件，
形成数据处理管线，生成的科学数据产品。CSST 科学观测
0 级数据产品表见表表14.1；CSST 科学观测1、2 级数据产
品表
4. 表14.2；CSST 工程辅助数据产品表见表表14.3。
表14.1
CSST 科学观测0 级数据产品表
后端
模块
数据
级别
数据内容
数据
格式
可追踪性工作包
巡天模块
多色成像/
无缝光谱
0 级
主焦面原始曝光图像
FITS
科学与应用数据中心为
0 级
多色成像参考图像，包括偏置、平场、暗电流等原始图像数
据
FITS
科学与应用数据中心为
0 级
无缝光谱参考图像，包括暗电流、偏置、同一光谱带宽内不
同波长的平场等原始图像文件
FITS
科学与应用数据中心为
0 级
观测中间一些固定时刻的精密导星仪数
据、天体定标组件、短波红外组件、波前传感器原始数据
FITS
科学与应用数据中心为
多通道成
像仪
0 级
观测目标的原始曝光图像
FITS
科学与应用数据中心为
0 级
参考图像，包括偏置、平场、暗电流等原始图像数据
FITS
科学与应用数据中心为
0 级
观测期间的原始导星数
FITS
科学与应用数据中心为
积分视场
光谱仪
0 级
观测目标的原始曝光图像
FITS
科学与应用数据中心为
0 级
观测期间的原始导星数据
FITS
科学与应用数据中心为
系外行星
成像星冕
仪
0 级
观测目标的原始曝光图像
FITS
科学与应用数据中心为
0 级
参考图像，包括偏置、平场、暗电流、天空背景等原始图像
数据
FITS
科学与应用数据中心为
0 级
原始定标图像，包括标准星图像、双星图像
FITS
科学与应用数据中心为
太赫兹模
块
0 级
原始谱线数据（每条谱线通道，包含积分开始、结束时间或
者积分时间）
二进
制文
件
科学与应用数据中心为
0 级
太赫兹模块状态信息（探测器、本振源、低温放大器、常温
中频、数字频谱仪、中频输出总功率、校准黑体温度、校准
镜的位置、观测模式、观测频率及边带等状态
二进
制文
件
科学与应用数据中心为
244
信息）
表14.2
CSST 科学观测1、2 级数据产品表
后端
模块
数据
级别
数据内容
数据
格式
可追踪性工作包
可追踪性工作包
巡天模块
多色成像
1 级
完成仪器效应改正、宇宙线
去除、背景光去除、畸变改
正、天体测量定位、天体流
量定标的单幅图像数据，及
其对应的权重图像flag 图像
数据及相关元信息文件
FITS、
文本文
件
多色成像仪器效应改正工作包
KSC-SJ1-PK-03
1 级
偏置、平场、暗电流等经过
合并处理的参考图像
FITS
本底参考图像生成及变化分析工作
包、
KSC-SJB-PK-0
暗流参考图像生成及变化分析工作
包、
KSC-SJB-PK-0
内部平场参考图像生成及变化分析
工作包、
KSC-SJB-PK-0
2 级
同一天区、同一滤光片多次
曝光的合并图像数据
FITS
多色成像合并图像工作包
KSC-SJ1-PK-22
2 级
点扩散函数(PSF)在视场中的
分布
FITS
多波段PSF 均匀化星表提取工作
包
KSC-SJ1-PK-21
2 级
单幅图像星表，包括图像中
所有源的像素位置、信噪
比、单色孔径测光星等、单
色PSF 测光星等、单色模型
测光星等、天体测量参数
（天球位置、三角视差和自
行）
、天体分类（点源、面
源、未知）
、科学可用性标记
等，以及各参数对应的误差
FITS
单次曝光星表提取、
KSC-SJ1-PK-7
多历元位置数据解算BCRS 下天
体方向、距离、自行参数工作包、
KSC-SJ9-PK-05
多色成像0 级、1 级、2 级数据可
用性标记工作包
KSC-SJ1-PK-01
KSC-SJ1-PK-08
KSC-SJ1-PK-18
2 级
合并图像星表，包括图像中
FITS
多色成像合并星表提取工作包、
KSC-SJ1-PK-17
245
所有源的位置、信噪比、多
色孔径测光星等、多色PSF
测光星等、模型测光星等、
天体测量参数（天球位置、
三角视差和自行）
、天体分类
（点源、面源、未知）
、科学
可用性标记等，以及各参数
对应的误差
多历元位置数据解算BCRS 下天
体方向、距离、自行参数工作包、
KSC-SJ9-PK-05
多色成像0 级、1 级、2 级数据可
用性标记工作包
KSC-SJ1-PK-01
KSC-SJ1-PK-08
KSC-SJ1-PK-18
2 级
强引力透镜源表
FITS
多色成像强引力透镜源计算工作包
KSC-SJ1-PK-24
2 级
恒星星表，包括的自行、大
气参数、距离和消光
FITS
多色成像恒星参数计算工作包
KSC-SJ1-PK-25
2 级
太阳系快速移动天体源表和
轨道参数
FITS
天测快速移动目标的轨道计算和运
行分类工作包
KSC-SJ9-PK-07
巡天模块
无缝光谱
1 级
完成仪器效应改正、宇宙线
去除、背景光去除、畸变改
正、天体测量定位等的单幅
及合并二维光谱科学数据，