和功能详见表10.25。
预先定义天
区划分表
扫描每个天
区块
在数据库中查找该天区
块覆盖的成像和无缝光
谱观测1级数据
数据库
该天区块满足生成
2级数据产品要求
天区覆盖表
是
否
扫描下一
个天区块
84
图10.52 天区观测覆盖分析工作包流程图
表10.25 天区观测覆盖分析工作包模块列表
序号
功能模块名称
输入
输出
实现功能
1
扫描天区模块
预先定义天区
划分表
扫描天区信息
得到天区扫
描信息
2
天区观测覆盖分析
数据库和天区
扫描结果
天区覆盖表
得到天区覆
盖信息
8.1.4.20 多色成像天体分类工作包
根据多色测光或无缝光谱数据判断天体的类型，至少包括：恒
星、星系、QSO、unknown 四类。输入多色测光星表、无缝光谱数
据，输出分类信息以及相应质量标记。多色成像天体分类工作包流
程图见图10.53（工作包编号：KSC-SJ9-PK-20），模块列表和功能
详见表10.26。
图10.53 多色成像天体分类工作包流程图
表10.26 多色成像天体分类工作包模块列表
序号
功能模块名称
输入
输出
实现功能
1
天体分类
多波段合并星
表
天体分类信息和
相应的质量标记
得到天体分
类星表
8.1.4.21 多波段PSF 均匀化星表提取工作包
该工作包是星表提取的另一种方案，采用多波段PSF 均匀化的
方法进行星表提取，负责在完成定标后的图像数据和对应的weight、
flag 数据图像进行图像Mosaic 处理、天光背景扣除、天文目标探测、
得到减天光的图像、探测的目标星表后再进行多波段PSF 重构和匹
配，得到PSF 均匀化后的图像数据，在此基础上做全波段联合
deblending 和测光（主要包括改进的Sextracter、改进的A-PHOT、
多波段合并
测光星表
天体分类
天体分类星
表
85
改进的Scarlet、改进的TRACTOR、改进的MusCADeT 几种测光
方法），最终得到整合的全波段联合测光星表。多波段PSF 均匀化
星表提取工作包流程图见图10.54（工作包编号：KSC-SJ1-PK-21），
模块列表和功能详见表10.27。
改进的Sext ract or
改进的A
-PH
OT
改进的Scar l et
改进的TR
ACTOR
改进的M
usCA
DeT
全波段联合debl engdi ng+测光
PSF均匀化后的图像数据
整合的全波段联合测光星表
多波段PSF匹配
多波段PSF重构
定标后的科学图像数
据和对应的weight和
fl ag图像
图像M
osai c处理
M
osai c处后的图像数
据、对应的weight和
fl ag矩阵
天光背景扣除
减天光后的图像、探测的目
标星表
天文目标探测
图10.54 多色成像多波段PSF 均匀化星表提取工作包流程图
表10.27 多色成像多波段PSF 均匀化星表提取工作包模块列表
序号
功能模块名称
输入
输出
实现功能
1
图像Mosaic 处
理
完成定标后的图
像数据、weight
及flag 数据矩
阵
Mosaic 后
的图像数
据
、
weight 及
flag 数据
矩阵
得到Mosaic 后的图
像数据、weight 及
flag 数据矩阵
2
天光背景扣除
完成定标及
Mosaic 后的图像
数据矩阵
减天光后
的图像
天光背景测量及扣除
3
天文目标探测
初步减天光后的
图像数据矩阵
探测的目
标星表
多模式天文目标探测
4
多波段PSF 重构
减天光后的图像
数据矩阵
重构的
PSF
构建PSF 模型，重
构选定位置PSF，通
过内插构建PSF
5
多波段PSF 匹配
重构的PSF
全波段
PSF 均匀
化图像数
据矩阵
对全波段图像进行
PSF 均匀化操作，生
成全波段PSF 均匀
化图像数据
6
全波段联合
全波段PSF 均
全波段联
不同星场进行
86
deblending+测光
匀化图像数据矩
阵
合测光星
表
deblending 处理，开
展基于改进后的
SExtractor 的全波段
联合测光；基于改进
后的A-PHOT 的全
波段联合测光；基于
改进后的Scarlet 、
TRACTOR
、
MusCADeT
( 基于
SED) 的全波段联合
测光, 并整合多种方
法获得的星表
8.1.4.22 多色成像合并图像工作包
对两幅同一滤光片拍摄图像进行合并，输入为两次曝光的同一
天区统一滤光片1 级图像，输出为合并之后的1 级图像。多色成像
合并图像工作包流程图见图10.55（工作包编号：KSC-SJ1-PK-22），
模块列表和功能详见表10.28。
图10.55 合并图像工作包流程图
表10.28 合并图像工作包模块列表
序号
功能模块名称
输入
输出
实现功能
1
合并图像模块
为两次曝光的
同一天区同一
滤光片1 级
图像
合并之后的1
级图像
得到同一天
区同一滤光
片的合并图
像数据
天区覆盖表
1级图像数据
图像合并天
区标记表
图像合并
合并图像数
据
合并图像元
数据，用于
PSF重构
87
8.1.4.23 多色成像星系红移计算工作包
利用多色测光数据或无缝光谱数据计算星系的红移。输入为星
系的多色测光或无缝光谱数据，输出为星系红移数据。支持一批数
据的批量输入和批量输出。正常情况下将一个天区块（brick）内的
星系数据批量输入获得批量结果。多色成像星系红移计算工作包流
程图见图10.56（工作包编号：KSC-SJ1-PK-23），模块列表和功能
详见表10.29。
图10.56 多色成像星系红移计算工作包流程图
表10.29 多色成像星系红移计算工包模块列表
序号
功能模块名称
输入
输出
实现功能
1
测量星系红移模块
星系的多色测
光或无缝光谱
数据，天体分
类表
星系红移数据
得到星系红
移数据
8.1.4.24 多色成像强引力透镜源计算工作包
输入同一天区块多色图像，利用人工智能算法从中寻找强引力
透镜事件，如果找到则将主要参数保存到数据库中。多色成像强引
力透镜源计算工作包流程图见图10.57（工作包编号：KSC-SJ1-PK-
24），模块列表和功能详见表10.30。
多波段合并
测光星表
一维无缝光
谱
天体分类表
星系红移测
量
星系红移星
表
88
图10.57 多色成像强引力透镜源计算工作包流程图
表10.30 多色成像强引力透镜源计算工作包模块列表
序号
模块名称
输入
输出
实现功能
1
搜索强引力透镜模块
输入同一天区
块多色图像和
天区覆盖表
强引力透镜事件
强引力透镜
模块并保存
数据
8.1.4.25 多色成像恒星参数计算工作包
该工作包是通过输入合并星表和天体分类表，进行恒星参数测
量，得到恒星参数星表，然后经过QC2 检测存入数据库中。多色成
像恒星参数计算工作包流程图见图10.58（工作包编号：KSC-SJ1-
PK-25），模块列表和功能详见表10.31。
合并星表
恒星参数测
量
天体分类表
Q
C2
恒星参数星表
图10.58 多色成像恒星参数计算工作包流程图
表10.31 多色成像恒星参数计算工作包模块列表
序号
功能模块名称
输入
输出
实现功能
1级图像数据
强引力透镜
搜索
强引力透镜
星表
天区覆盖表
89
1
计算恒星参数工作包
合并星表和天
体分类表
恒星参数星表
得到恒星参
数星表
8.1.4.26 多色成像高精度流量定标工作包
该工作包针对1 级多色成像数据，利用海量外部巡天数据开展
高精度流量定标。详细过程如下：首先分不同类型恒星，经精确红
化改正后，考虑恒星金属丰度、表面重力等因素影响，利用外部星
表数据构建CSST 测光系统的海量标准星表；然后利用标准星方法
和整体定标方法，对多个图像的仪器零点、恒星平场进行测量；接
着对零点随星等、颜色、探测器位置等的变化进行检验与修正；最
后进行绝对定标并确定CSST 测光系统的响应曲线。中间需要进行
多次迭代。多色成像高精度流量定标工作包流程图见图10.59（工作
包编号：KSC-SJ1-PK-08），模块列表和功能详见表10.32。
标准星方法和整体
定标方法测量图像
零点和平常