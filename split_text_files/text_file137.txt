线划分为0 级处理流水线，1 级处理流水线和2 级处理流水线。0
级和1 级处理流水线即是日常处理流水线；2 级处理流水线则是数
据产品生成流水线。
流水线命名规则如下：
科学数据处理系统-模块标识符-流水线简称和类别-序号（XXX-
XXX-XXX-XX）,用短横线连接。详细解释见表7.2。
表7.2 流水线命名规则列表
命名
标识符
字符串长度
详细解释
科学数据处理系统
KSC
XXX
科学数据处理系统
31
模块标识符
SJ1
XXX
主巡天多色成像数据处理
SJ2
主巡天无缝光谱数据处理
SJ3
数据流管理
SJ4
流水线运行管理
SJ5
多通道成像仪数据处理
SJ6
积分视场光谱仪数据处理
SJ7
星冕仪数据处理
SJ8
太赫兹数据处理
SJ9
天体测量处理
SJA
数据科学可用性标记
SJB
在轨定标数据处理
流水线简称
PL
XX
PipLine，简称PL
类别
0
X
0 级处理流水线
1
1 级处理流水线
2
2 级处理流水线
流水线序号
01
XX
第几条流水线，如01、02、3……
例如：KSC-SJ1-PL0-01，表示数据系统多色成像模块的0 级
处理流水线第1 条流水线。
7.4 工作包命名规则
工作包命名规则如下：
科学数据处理系统-模块标识符-工作包简称-序号（XXX-XXX-
XX-XX）。详细解释见表7.3。
表7.3 工作包命名规则列表
命名
标识符
字符串长度
解释说明
科学数据处理系统
KSC
XXX
科学数据处理系统
模块标识符
SJ1
XXX
见流水线命名规则表7.1、表7.2 中模
块标识符
工作包简称
PK
XX
PacKage，简称PK
工作包序号
01
XX
01、02、03……
例如：KSC-SJ1-PK-01，表示科学数据处理系统多色成像模块
32
的第1 个工作包。
8数据处理软件流水线设计
数据处理软件是CSST 科学数据处理系统的核心任务，包括5
个硬件后端模块的数据处理，巡天模块（包括多色成像数据和无缝
光谱数据）
、多通道成像仪模块、积分视场光谱仪模块、星冕仪模块
和太赫兹模块，详细信息见表10.1，每个模块的数据处理都分为0
级数据处理，1 级数据处理和2 级数据处理，其中星冕仪模块只到
1 级数据处理。最终获取科学数据产品并进入数据库。0、1 级数据
处理总框架图见图10.1；2 级数据处理总框架图见图10.2。
表10.1 数据处理软件0-1 级数据处理模块功能列表
序号
功能名称
功能详解
1
巡天模块
巡天模块观测得到多色成像数据，无缝光谱数
据，然后经过多色成像数据处理和无缝光谱数
据处理，最终生成测光数据库，无缝光谱数据
库和天测数据库。
2
多通道成像仪模块
主要生成多通道成像仪后端模块数据
3
积分视场光谱仪模块
主要生成积分视场光谱仪模块数据
4
星冕仪模块
主要生成星冕仪模块数据
5
太赫兹模块
主要生成太赫兹模块数据
33
0级数据
数据类型判断
巡天模块
数据处理
巡天模块数据
多通道成像仪
数据处理
多通道成像仪
数据
积分视场光谱
仪数据处理
积分视场光谱
仪数据
星冕仪
数据处理
星冕仪数据
太赫兹
数据处理
太赫兹数据
转人工处理
在轨定标数据
转人工处理
测试数据
1级数据
数据库
数据库
                                    0级数据处理
Q
C1
Q
C0
                                     1级数据处理
图10.1 数据处理软件0、1 级数据处理总框架图
34
1级数据
巡天模块
数据产品生成
流水线
多通道成像仪
数据产品生成
流水线
积分视场光谱仪数
据产品生产
流水线
太赫兹
数据产品生成
流水线
2级数据产品
数据库
数据库
2级数据处理
Q
C2
数据准备
监控数据产品
流水线状态
巡天模块
1级数据
多通道成像仪
1级数据
积分视场光谱仪
1级数据
太赫兹
1级数据
数据库生成
图10.2 数据处理软件2 级数据处理总框架图
8.1 巡天模块数据处理
8.1.1 巡天模块数据分类
巡天模块包括两种配置的探测器，一个用于多色成像，一个用
于无缝光谱。因此获取两种不同类型的观测数据，即多色成像数据
和无缝光谱数据。在得到0 级观测数据输入后按这两类数据分别进
行处理，分为多色成像数据处理和无缝光谱数据处理，其中多色成
像处理按照功能不同分为多色成像数据处理和天体测量数据处理，
最终获取科学数据产品，存入数据库供科学家使用。下面对两类数
据和处理进行介绍。
35
8.1.1.1
多色成像数据
多色成像数据处理系统流水线的主要任务是将主巡天模块多色
成像18 块探测器的0 级科学数据（raw data）进行处理生成1 级和
2 级科学数据产品。
多色成像数据处理过程简单介绍如下：
0 级多色成像科学数据需要利用参考数据，经过仪器效应改正
转换为未定标的图像数据及数据对应的权重数据（weight data）、标
记位数据（flag data）等。此过程主要目的是改正光学系统、探测器
芯片、电子控制等硬件设备对数据造成的污染，其中包括的功能较
多，且部分功能与探测器选型有关。基本流程包括：偏置改正、暗
场改正、平场改正、快门效应改正、宇宙线和坏像元探测等。
完成仪器效应改正之后进入位置定标功能。此过程是利用18
块多色成像探测器共同参与，计算得到整个靶面的物理位置与天球
坐标的投影映射。开始定标计算前，需要通过数据库获得望远镜指
向及其视场大小区域内的外部参考星表，并从未定标的图像数据中
探测得到用于计算的天体，最后通过算法获得映射关系的公式。
完成位置定标后的图像数据，可以进入外部流量定标功能。此
过程是对不同探测器的图像分别进行对应滤光片波段的零点计算。
也需要通过数据库获得望远镜指向及其视场大小区域内的外部参考
星表，与图像数据中探测得到的天体进行匹配，并利用算法筛选稳
定的天体并进行颜色项等修正后得到探测器的零点。结束位置定标
后的图像数据，需要经过数据科学可用性标记模块检查合格后，完
36
成数据文件与文件头文件的合并，此即1 级图像数据。
合格的1 级多色成像图像数据继续使用以提取星表。此过程是
对不同探测器的图像分别进行科学目标探测，最终形成包括科学图
像中所有天体信息的星表等2 级数据产品。星表中需要包括每个目
标的位置、通过不同测量方法获得的流量、点扩散函数信息、不同
模型下的星系形态和流量等。
天体测量多色成像数据处理对从探测器获得的0 级多色成像数
字图像进行修正和定标，然后在图像中探测天体目标，计算流量和
形状等参数测量并进行天体测量，检测图像上的太阳系快速移动天
体，生成1 级天测科学数据。在1 级天测数据的基础上开展单帧图
像高精度相对定位，对已积累多次观测数据的天区，开展多历元位
置解算BCRS 下天体测量5 参数的工作，对多次观测到的太阳系快
速移动目标，开展轨道确定以及目标分类工作。最终形成可供天文
学家使用的2 级包括天体三维位置运动等参数及其误差的天体测量
星表和太阳系快速移动天体历表。
对于天体测量而言，针对低密度星场，中等密度星场以及高密
度星场星场图像分别采用不同的目标检测、高精度定心和天体测量
方法进行处理。相关过程数据以及结果数据包括GCRS 及近似
BCRS 下的天球坐标等经质量控制模块检查合格后，生成单帧图像
的1 级天测科学数据。对每一帧图像，查找同一或邻近天区的多历
元观测资料，并依据不同天体的运动规律，使用多历元观测资料检
测图像中的太阳系快速移动天体。检测结果与天测天力星表中的太
37
阳系快速移动天体进行交叉匹配，一旦发现新的天体，经数据质量
控制模块检查合格后，立即发出预警，启动地面后随跟踪。所有检
测到的太阳系快速移动天体经数据质量控制模块检查合格后，生成
包含快速移动目标的时序定位数据及特征信息的1 级天测科学数据。
以1 级天测科学数据为基础，开展单帧图像高精度相对定位工
作，生成单帧图像的2 级天测科学数据。当同一天区或者相邻天区
的单帧图像相对定位数据达到多历元位置数据解算BCRS 下天体测
量5 参数流水线触发标准时，触发该流水线生成天体测量5 参数2
级天测科学数据。当同一太阳系快速移动天体的相对定位数据达到