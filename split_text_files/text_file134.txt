图像数据、图像相减数据和2 级星表数据。
6.1.1.5
积分视场光谱仪数据处理
在积分场光谱仪0 级数据的基础上，其进一步处理功能包括：
1) 以积分视场光谱仪的0 级数据及相关辅助数据为输入，进
行仪器效应改正，背景光和宇宙线影响去除、光谱追迹等处
理，生成1 级单次曝光的三维光谱数据立方体（datacube），
并进行多次曝光叠加、波长定标和流量定标，生成1 级三
维光谱数据立方体数据产品；
2) 在上述1 级数据的基础上，对1 级数据进一步进行谱线和
连续测量处理，利用测量结果生成2 级科学数据立方体。
6.1.1.6
系外行星成像星冕仪数据处理
以系外行星成像星冕仪的0 级数据及相关辅助数据为输入，进
行仪器效应改正，背景光和宇宙线影响去除等处理，生成1 级图像
数据。
6.1.1.7
太赫兹模块数据处理
在太赫兹模块0 级数据的基础上，其进一步处理功能包括：
1) 以太赫兹模块的0 级数据及相关辅助数据为输入，对其进
行指向修正、频率和速度修正、位置修正以及效率修正，形
成固定积分时间的标准谱线1 级数据产品；
2) 在上述1 级数据基础上合并同一天区、同一频率谱线数据，
13
生成2 级数据产品。
6.1.1.8
在轨定标数据处理
1) 每个焦面仪器的在轨定标数据处理
对于各焦面仪器对标准星进行观测所获取的在轨定标数据，处
理过程与科学观测数据一致。将所得的标准星在各波段流量、位置
等处理结果与已知结果比对，获取相应定标数据作为在轨定标数据
产品，用于其它观测数据处理。
对于各焦面仪器采集的参考图像数据，进行图像合并等处理后，
形成1 级参考图像数据，在观测数据处理中使用。
2) 仪器间的交叉定标数据处理
多通道成像仪可对巡天模块标准星进行专门地在轨定标观测，
数据按照多通道成像仪正常的数据处理流水线处理，并通过和标准
星已知数据对比获得定标参数数据产品，用于巡天模块的定标处理。
积分视场光谱仪在观测期间需要多通道成像仪伴随观测，以获得定
标观测数据，数据按照多通道成像仪正常的数据处理流水线处理，
并形成积分视场光谱仪所需要的定标数据产品。
6.1.2 数据库
6.1.2.1
数据库内容需求
CSST 科学数据处理系统的数据处理软件和观测需求编排软件这
两个软件配置项均有数据库支持的需求。它们对数据库的内容需求
如下：
数据处理软件要求：
14
1. 保存所有0 级数据记录，用于对数据处理软件的自动化运
行进行调度，包括:
a) 数据处理流水线指定0 级数据文件的元数据、位置和文
件名称；
b) 每一个0 级数据文件的处理状态；
c) 每个0 级数据相应辅助数据文件（最新的合并后平场、
本底、暗场、坏像元标记等）的元数据和保存位置；
d) 每个0 级数据对应曝光时的望远镜状态参数、工程遥测
参数；
e) 对应0 级数据在观测时间段内的精密导星数据；
f)
0 级数据QC0 的结果；
g) 0 级数据的产生版本号等。
2. 保存所有1 级数据的记录，包括：
a) 1 级数据文件的元数据、文件名称和保存路径；
b) 记录1 级数据生成过程的状态信息；
c) QC1 对1 级数据文件的检查结果；
d) 1 级流水线的软件版本号等。
3. 保存所有2 级数据，包括：
a) 2 级数据全天天区定义表，定义2 级数据处理的天区划
分；
b) 基础源表，按类型区分的天体星表（恒星总表、星系总
表、QSO 总表等）；
15
c) 天体的主要参数表；
d) 2 级数据处理过程产生的状态、质量标记等信息；
e) 保存2 级数据文件元数据、文件名称和保存路径，如1
维无缝光谱文件的保存位置、文件名称、IFS 数据立方体
的保存位置等；
f)
2 维光谱的小图或小图元数据等参考数据；
g) 2 级流水线处理的科学可用性标记（QC2）；
h) 2 级流水线软件的版本号。
4. 外部参考数据：
a) 为指定表所需要的外部星表；
b) 流量定标所需要的流量定标天体星表；
c) 波长定标所需要的波长定标星表等。
观测需求编排软件需求包括：
1. 全天观测天区中心位置表，定义了巡天观测的足迹；
2. 浏览最新望远镜的各项状态参数、工程遥测数据等；
3. 观测计划和进度表，定义了观测计划编排，跟踪观测进度和
观测质量，标记重复观测等观测状态信息。
观测仿真软件不需要专门的数据库支持。
6.1.2.2
数据库功能需求
CSST 科学数据处理系统要求数据库提供以下功能：
1. 保存上述内容的各类星表；
16
2. 高效查询其中的各项内容；
3. 动态写入0-2 级数据相关数据内容；
4. 静态保存外部参考星表数据内容，大小不小于100 亿行，
并提供查询功能；
5. 支持基于天球位置匹配的单表、多表合并（交叉证认）操作；
6. 支持天文数据的锥形检索、矩形检索功能；
7. 支持依据Healpix 天区划分协议的天区检索查询；
8. 通过python API 实现对数据库中保存的内容进行查询、写
入和更新，支持批量操作；
9. 支持科学数据处理系统通过API 藉由互联网访问数据库；
10. 支持0-2 级数据表的完整导出，以用于软件升级前数据库存
档或软件产品发布；
11. 采用分布式、结构化存储，具备事务性，强一致性，具备副
本功能，单机故障不影响整体服务。
6.1.3 流水线运行管理
由于数据处理软件下的功能模块数目众多、功能复杂，流水线
的运行对系统资源的动态要求变化幅度很大，需要采用集成接口设
计，统一管理各个软件模块在科学与应用数据中心业务支撑平台、
数据存档与管理子系统上的运行。其主要功能如下：
1. 实现云计算框架下数据处理支撑平台和数据处理软件之间的
平滑连接，形成运行中间层，；
17
2. 支持使用容器对数据处理业务功能的封装，把天文科学数据
分析处理过程中涉及的各类软件适配到云平台上；
3. 支持根据支撑平台提供的计算资源对数据处理流水线的动态
调度、并行化运行，以最大程度实现对计算资源的利用；
4. 提供数据处理模块的统一软件框架及规范；
5. 确保数据处理流水线运行的可靠性。
6.2 主要技术指标
6.2.1 数据产品要求
CSST 数据产品包括：
科学观测0 级数据产品，其主要数据内容、数据格式要求详见
表6.1，由科学与应用数据中心负责生产；
科学观测1 级、2 级数据产品，其主要数据内容、数据格式详
见表6.2，由CSST 科学数据处理系统负责生产；
工程辅助数据产品，其主要数据内容、数据来源详见表12.1；
数据处理辅助数据产品，包括外部标准星星表和各后端模块定
标数据产品。定标数据由CSST 科学数据处理系统根据巡天光学设
施各研制单位提供的地面测试定标数据和CSST 在轨定标数据生成，
数据格式为文本或FITS 文件；
科学观测3 级数据产品，由科学数据处理系统集成经协调确定
的研究课题提交的用于生成3 级数据产品的分析软件，形成数据处
理管线，生成的科学数据产品。
18
表6.1 CSST 科学观测0 级数据产品表
序
号
后端
模块
数据
级别
数据内容
数据
格式
1
巡天模块
多色成像
/ 无缝光
谱
0 级
主焦面原始曝光图像
FITS
2
0 级
多色成像参考图像，包括偏置、平场、暗
电流等原始图像数据
FITS
3
0 级
无缝光谱参考图像，包括暗电流、偏置、
同一光谱带宽内不同波长的平场等原始图
像文件
FITS
4
0 级
观测中间一些固定时刻的精密导星仪数
据、天体定标组件、短波红外组件、波前
传感器原始数据
FITS
5
多通道成
像仪
0 级
观测目标的原始曝光图像
FITS
6
0 级
参考图像，包括偏置、平场、暗电流等原
始图像数据
FITS
7
0 级
观测期间的原始导星数
FITS
8
积分视场
光谱仪
0 级
观测目标的原始曝光图像
FITS
9
0 级
观测期间的原始导星数据
FITS
10
系外行星
成像星冕
仪
0 级
观测目标的原始曝光图像
FITS
11
0 级
参考图像，包括偏置、平场、暗电流、天
空背景等原始图像数据
FITS
12
0 级
原始定标图像，包括标准星图像、双星图
像
FITS
13
太赫兹模
块
0 级
原始谱线数据（每条谱线通道，包含积分
开始、结束时间或者积分时间）
二进制
文件
14
0 级
太赫兹模块状态信息（探测器、本振源、
低温放大器、常温中频、数字频谱仪、中
频输出总功率、校准黑体温度、校准镜的
位置、观测模式、观测频率及边带等状态